<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Congressional Action Prediction Tool</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				min-height: 100vh;
				color: #333;
			}

			.container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 20px;
			}

			.header {
				text-align: center;
				color: white;
				margin-bottom: 30px;
			}

			.header h1 {
				font-size: 2.5em;
				margin-bottom: 10px;
				text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
			}

			.header p {
				font-size: 1.1em;
				opacity: 0.9;
			}

			.main-content {
				display: grid;
				grid-template-columns: 1fr 2fr;
				gap: 20px;
				margin-bottom: 20px;
			}

			.sequence-panel,
			.predictions-panel {
				background: white;
				border-radius: 12px;
				padding: 25px;
				box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
				backdrop-filter: blur(4px);
				border: 1px solid rgba(255, 255, 255, 0.18);
			}

			.sequence-panel h2,
			.predictions-panel h2 {
				color: #2c3e50;
				margin-bottom: 20px;
				font-size: 1.4em;
				border-bottom: 2px solid #3498db;
				padding-bottom: 10px;
			}

			.sequence-display {
				min-height: 200px;
				background: #f8f9fa;
				border: 2px dashed #dee2e6;
				border-radius: 8px;
				padding: 15px;
				margin-bottom: 20px;
			}

			.sequence-item {
				background: linear-gradient(135deg, #74b9ff, #0984e3);
				color: white;
				padding: 12px 15px;
				margin: 8px 0;
				border-radius: 6px;
				font-size: 0.9em;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
				transition: transform 0.2s ease;
				line-height: 1.4;
			}

			.sequence-item:hover {
				transform: translateY(-1px);
			}

			.sequence-item .step-number {
				font-weight: bold;
				background: rgba(255, 255, 255, 0.2);
				padding: 3px 8px;
				border-radius: 4px;
				margin-right: 10px;
				font-size: 0.8em;
			}

			.sequence-item .action-description {
				display: block;
				margin-top: 5px;
				font-size: 0.85em;
				opacity: 0.9;
			}

			.empty-sequence {
				color: #6c757d;
				text-align: center;
				margin-top: 60px;
				font-style: italic;
			}

			.controls {
				display: flex;
				gap: 10px;
				margin-bottom: 20px;
				flex-wrap: wrap;
			}

			.btn {
				padding: 10px 20px;
				border: none;
				border-radius: 6px;
				cursor: pointer;
				font-weight: 600;
				transition: all 0.3s ease;
				font-size: 0.9em;
				text-decoration: none;
				display: inline-block;
				text-align: center;
			}

			.btn-primary {
				background: linear-gradient(135deg, #667eea, #764ba2);
				color: white;
			}

			.btn-secondary {
				background: #95a5a6;
				color: white;
			}

			.btn-danger {
				background: #e74c3c;
				color: white;
			}

			.btn:hover {
				transform: translateY(-2px);
				box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
			}

			.btn:disabled,
			.btn.disabled {
				opacity: 0.6;
				cursor: not-allowed;
				transform: none;
				pointer-events: none;
			}

			.search-form {
				margin-bottom: 20px;
			}

			.search-container {
				display: flex;
				gap: 10px;
			}

			.search-input {
				flex: 1;
				padding: 12px;
				border: 2px solid #ddd;
				border-radius: 8px;
				font-size: 1em;
				transition: border-color 0.3s ease;
			}

			.search-input:focus {
				outline: none;
				border-color: #667eea;
				box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
			}

			.search-btn {
				background: linear-gradient(135deg, #667eea, #764ba2);
				color: white;
				border: none;
				padding: 12px 24px;
				border-radius: 8px;
				cursor: pointer;
				font-weight: 600;
				transition: all 0.3s ease;
			}

			.search-btn:hover {
				transform: translateY(-2px);
				box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
			}

			.clear-search {
				background: #95a5a6;
				color: white;
				border: none;
				padding: 12px 20px;
				border-radius: 8px;
				cursor: pointer;
				font-weight: 600;
				text-decoration: none;
				display: inline-block;
			}

			.predictions-container {
				max-height: 600px;
				overflow-y: auto;
			}

			.prediction-item {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 15px;
				border: 1px solid #e9ecef;
				border-radius: 8px;
				margin-bottom: 10px;
				background: linear-gradient(135deg, #f8f9fa, #ffffff);
				transition: all 0.3s ease;
			}

			.prediction-link {
				display: flex;
				justify-content: space-between;
				align-items: center;
				width: 100%;
				text-decoration: none;
				color: inherit;
			}

			.prediction-item:hover {
				border-color: #667eea;
				transform: translateX(5px);
				box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
			}

			.prediction-description {
				flex: 1;
				font-weight: 500;
				color: #2c3e50;
			}

			.prediction-probability {
				background: linear-gradient(135deg, #667eea, #764ba2);
				color: white;
				padding: 6px 12px;
				border-radius: 20px;
				font-weight: bold;
				font-size: 0.9em;
				min-width: 60px;
				text-align: center;
				margin-left: 15px;
			}

			.stats {
				background: white;
				border-radius: 12px;
				padding: 20px;
				box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
				backdrop-filter: blur(4px);
				border: 1px solid rgba(255, 255, 255, 0.18);
			}

			.stats-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
				gap: 20px;
			}

			.stat-item {
				text-align: center;
				padding: 15px;
				background: linear-gradient(135deg, #f8f9fa, #ffffff);
				border-radius: 8px;
				border: 1px solid #e9ecef;
			}

			.stat-number {
				font-size: 2em;
				font-weight: bold;
				color: #667eea;
			}

			.stat-label {
				color: #6c757d;
				font-size: 0.9em;
				margin-top: 5px;
			}

			.flash-messages {
				margin-bottom: 20px;
			}

			.flash-message {
				padding: 12px 16px;
				border-radius: 8px;
				margin-bottom: 10px;
				font-weight: 500;
			}

			.flash-success {
				background: #d4edda;
				border: 1px solid #c3e6cb;
				color: #155724;
			}

			.flash-error {
				background: #f8d7da;
				border: 1px solid #f5c6cb;
				color: #721c24;
			}

			.flash-info {
				background: #d1ecf1;
				border: 1px solid #bee5eb;
				color: #0c5460;
			}

			.flash-warning {
				background: #fff3cd;
				border: 1px solid #ffeaa7;
				color: #856404;
			}

			.no-results {
				text-align: center;
				padding: 40px;
				color: #6c757d;
				font-style: italic;
			}

			.error-message {
				background: #fee;
				border: 1px solid #fcc;
				color: #c33;
				padding: 15px;
				border-radius: 8px;
				margin-bottom: 20px;
				font-weight: 500;
			}

			@media (max-width: 768px) {
				.main-content {
					grid-template-columns: 1fr;
				}

				.stats-grid {
					grid-template-columns: 1fr 1fr;
				}

				.controls {
					flex-direction: column;
				}

				.search-container {
					flex-direction: column;
				}

				.prediction-link {
					flex-direction: column;
					align-items: flex-start;
					gap: 10px;
				}

				.prediction-probability {
					align-self: flex-end;
				}
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="header">
				<h1>Congressional Action Prediction Tool</h1>
				<p>
					Explore sequential predictions of congressional actions
					using machine learning
				</p>
			</div>

			<!-- Flash Messages -->
			{% if get_flashed_messages() %}
			<div class="flash-messages">
				{% for category, message in
				get_flashed_messages(with_categories=true) %}
				<div class="flash-message flash-{{ category }}">
					{{ message }}
				</div>
				{% endfor %}
			</div>
			{% endif %}

			<!-- Error Message -->
			{% if error_message %}
			<div class="error-message">
				<strong>Error:</strong> {{ error_message }}
			</div>
			{% endif %}

			<div class="main-content">
				<div class="sequence-panel">
					<h2>Action Sequence</h2>
					<div class="sequence-display">
						{% if sequence %} {% for item in sequence %}
						<div class="sequence-item">
							<span class="step-number">{{ item.step }}</span>
							{{ item.description }}
						</div>
						{% endfor %} {% else %}
						<div class="empty-sequence">
							No actions selected yet. Choose a predicted action
							to start building the sequence.
						</div>
						{% endif %}
					</div>
					<div class="controls">
						{% if sequence %}
						<a
							href="{{ url_for('undo_action') }}"
							class="btn btn-secondary"
						>
							Undo Last Action
						</a>
						{% else %}
						<span class="btn btn-secondary disabled">
							Undo Last Action
						</span>
						{% endif %}
						<a
							href="{{ url_for('reset_sequence') }}"
							class="btn btn-danger"
						>
							Reset Sequence
						</a>
					</div>
				</div>

				<div class="predictions-panel">
					<h2>Predicted Next Actions</h2>
					<form method="POST" class="search-form">
						<div class="search-container">
							<input
								type="text"
								name="search"
								class="search-input"
								placeholder="Search actions..."
								value="{{ search_query or '' }}"
							/>
							<button type="submit" class="search-btn">
								Search
							</button>
							{% if search_query %}
							<a
								href="{{ url_for('index') }}"
								class="clear-search"
								>Clear</a
							>
							{% endif %}
						</div>
					</form>

					<div class="predictions-container">
						{% if predictions %} {% for pred in predictions %}
						<div class="prediction-item">
							<a
								href="{{ url_for('select_action', encoded_description=pred.encoded_description) }}"
								class="prediction-link"
							>
								<div class="prediction-description">
									{{ pred.description }}
								</div>
								<div class="prediction-probability">
									{{ pred.probability }}%
								</div>
							</a>
						</div>
						{% endfor %} {% else %}
						<div class="no-results">
							{% if search_query %} No actions found matching "{{
							search_query }}". {% else %} No predictions
							available. {% endif %}
						</div>
						{% endif %}
					</div>
				</div>
			</div>

			<div class="stats">
				<div class="stats-grid">
					<div class="stat-item">
						<div class="stat-number">
							{{ stats.sequence_length }}
						</div>
						<div class="stat-label">Actions in Sequence</div>
					</div>
					<div class="stat-item">
						<div class="stat-number">{{ stats.total_actions }}</div>
						<div class="stat-label">Total Possible Actions</div>
					</div>
					<div class="stat-item">
						<div class="stat-number">
							{{ stats.filtered_predictions }}
						</div>
						<div class="stat-label">Filtered Results</div>
					</div>
					<div class="stat-item">
						<div class="stat-number">
							{{ stats.top_probability }}%
						</div>
						<div class="stat-label">Highest Probability</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
